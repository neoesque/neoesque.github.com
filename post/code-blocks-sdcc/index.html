<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Code::Blocks + SDCC | neoesque</title>
  <meta name="author" content="neoesque">
  
  <meta name="description" content="neoesque&#39;s Linux Blog">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Code::Blocks + SDCC"/>
  <meta property="og:site_name" content="neoesque"/>

  
    <meta property="og:image" content="undefined"/>
  

  
    <link rel="alternative" href="/atom.xml" title="neoesque" type="application/atom+xml">
  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-37617901-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;

ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';

var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>


</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">neoesque</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">		
			<h1> Code::Blocks + SDCC</h1>
		</div>		
	



<div class="row post">
	<!-- cols -->
	
	<div class="col-md-9">
	

			

	<!-- content -->
	<div class="mypage">		
	    <p></p><h2>前言</h2><br>所謂 “工欲善其事必先利其器” ，在 8051 程式開發上，當然也有許多 compiler 選擇，最常見的不外乎 <a href="http://www.keil.com/c51/" target="_blank" rel="external">Keil C</a> ，但是由於 Keil C 是商業軟體要賣錢的，因此對於學生的我們似乎不是那麼適用，另外一個也是相當知名但非商業軟體的要算是 <a href="http://sdcc.sourceforge.net/" target="_blank" rel="external">SDCC</a> 了，由於 SDCC 本身只有 compiler 並沒有 IDE ，所以在編譯程式上顯得格外麻煩。前幾天在想 <a href="http://www.bloodshed.net/devcpp.html" target="_blank" rel="external">Dec-C++</a> 可不可以跟 SDCC 整，網路搜尋似乎是有這種 plugin 的，可是我找不到了，而且 Dev-C++ 也很久沒開發了，因此想說換找另一個目前當紅的 IDE — <a href="http://www.codeblocks.org/" target="_blank" rel="external">Code::Blocks</a> (以下用 CodeBlocks 稱乎) ，果然 CodeBlocks 有跟 SDCC 整在一起，這樣方便多了，以下將逐步介紹如何利用 CodeBlocks + SDCC 編譯出 8051 可以用的 Hex file。<br><a id="more"></a><br><h2>準備軟體</h2><br>當然本文是介紹 Code::Blocks + SDCC 所以你的電腦要先灌好他們拉。以下是載點：<br><br><a href="http://nchc.dl.sourceforge.net/sourceforge/codeblocks/codeblocks-8.02-setup.exe" target="_blank" rel="external">Code::Blocks 8.0.2 Windows 版安裝程式</a><br><br><a href="http://sdcc.sourceforge.net/snapshots/i586-mingw32msvc/sdcc-snapshot-i586-mingw32msvc-20080318-5108.zip" target="_blank" rel="external">SDCC Windows 版</a><br><p><br>以下介紹如何安裝<br></p><h2>安裝 Code::Blocks</h2><br>首先開啟 Code::Blocks 安裝程式之後會看到如下的畫面。<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://2.bp.blogspot.com/_hmIU1OIxdtY/R_zEv4Qsk2I/AAAAAAAAAPY/-nfIziHVDzk/s640/install_codeblock_1.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187237197659280226"><br>請點選 [Next]<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://3.bp.blogspot.com/_hmIU1OIxdtY/R_zE8IQsk3I/AAAAAAAAAPg/DykBfx0lDgM/s640/install_codeblock_2.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187237408112677746"><br>點選 [I Agree]<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://1.bp.blogspot.com/_hmIU1OIxdtY/R_zFLoQsk4I/AAAAAAAAAPo/NwGTPI81rlY/s640/install_codeblock_3.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187237674400650114"><br>這裡請 <span style="color:red;">把 type of install 改成 Full</span> 然後點 [Next]<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://3.bp.blogspot.com/_hmIU1OIxdtY/R_zFfIQsk5I/AAAAAAAAAPw/0xbB9_BJYDc/s640/install_codeblock_4.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187238009408099218"><br>選一個你想要安裝的位置吧，然後就點 [Install]<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://3.bp.blogspot.com/_hmIU1OIxdtY/R_zFvIQsk6I/AAAAAAAAAP4/nRTd6uSXY54/s640/install_codeblock_5.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187238284286006178"><br>裝完後會問你要不要執行 Code::Blocks 先點[否]吧!<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://4.bp.blogspot.com/_hmIU1OIxdtY/R_zF9YQsk7I/AAAAAAAAAQA/jG4B7ETO1Sc/s640/install_codeblock_6.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187238529099142066"><br>裝完摟，點 [Next]<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://2.bp.blogspot.com/_hmIU1OIxdtY/R_zGG4Qsk8I/AAAAAAAAAQI/j9kYRgKhzPA/s640/install_codeblock_7.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187238692307899330"><br><br>點 [Finish]<br><br>至此已經裝完 Code::Blocks 拉 在來看 SDCC 的安裝吧<br><p><br></p><h2>安裝 SDCC</h2><br>SDCC 的安裝非常簡單，將下載下來的 SDCC zip 檔解壓縮到 C: 底下就好拉，如下圖。<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://1.bp.blogspot.com/_hmIU1OIxdtY/R_zG0oQsk9I/AAAAAAAAAQQ/wA3b43zRihE/s640/sdcc.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187239478286914514"><br><p><br></p><h2>利用 Code::Blocks + SDCC 編譯 8051 程式</h2><br>首先開啟安裝好的 Code::Blocks<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://3.bp.blogspot.com/_hmIU1OIxdtY/R_zL8IQsk-I/AAAAAAAAAQY/i5lVf2ldVwo/s640/cb_01.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187245104694072290"><br>然後點選上圖中間的 [Create a new project]<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://1.bp.blogspot.com/_hmIU1OIxdtY/R_zMNoQsk_I/AAAAAAAAAQg/cAfAITIZyA4/s640/cb_02.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187245405341783026"><br>點選 [Console application]  (上圖框框處) 然後點 [Go]<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://4.bp.blogspot.com/_hmIU1OIxdtY/R_zMXYQslAI/AAAAAAAAAQo/JBt7imIn54w/s640/cb_03.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187245572845507586"><br>點 [Next]<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://2.bp.blogspot.com/_hmIU1OIxdtY/R_zMd4QslBI/AAAAAAAAAQw/cvOUT0hN9KU/s640/cb_04.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187245684514657298"><br>選 C (因為 8051 都是寫 C 語言而已拉) 選完點 [Next]<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://1.bp.blogspot.com/_hmIU1OIxdtY/R_zMmoQslCI/AAAAAAAAAQ4/4mtqBOVbWIU/s640/cb_05.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187245834838512674"><br>專案擺放位置，看你喜歡把專案擺在哪裡~ 設定完點 [Next]<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://1.bp.blogspot.com/_hmIU1OIxdtY/R_zMwoQslDI/AAAAAAAAARA/rQTi45Xidaw/s640/cb_06.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187246006637204530"><br>注意: <span style="color:red;">Compiler 那邊請選 SDCC Compiler</span>  選完點 [Finish] 專案就建完拉。<br><br>點完 [Finish] 之後會出現三個 script warning 都點選確定吧~<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://4.bp.blogspot.com/_hmIU1OIxdtY/R_zNeYQslEI/AAAAAAAAARI/FmI8t-4ahI4/s640/cb_07.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187246792616219714"><br><br>點完後視窗如下圖:<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://2.bp.blogspot.com/_hmIU1OIxdtY/R_zNl4QslFI/AAAAAAAAARQ/ZryEMFYOUzo/s640/cb_08.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187246921465238610"><br>把程式碼改成我們想要的 (這裡以實驗四為例) 貼完後向下面這樣<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://3.bp.blogspot.com/_hmIU1OIxdtY/R_zPLIQslGI/AAAAAAAAARY/amyMKJW11UY/s640/cb_09.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187248660926993506"><br>貼完後點 <span style="color:red;">[紅色框框處那個按鈕]</span> 就可以 編譯 了! 編譯訊息如下<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://4.bp.blogspot.com/_hmIU1OIxdtY/R_zPsYQslHI/AAAAAAAAARg/CL5wjVg7sqE/s640/cb_10.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187249232157643890"><br>最下面訊息欄顯示 0 error 2 warnings 我們只管有沒有 error 不管 warning 所以 0 error 表示編譯成功了 :P<br><br>我們可以切回 Build log 看一下<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://1.bp.blogspot.com/_hmIU1OIxdtY/R_zQ8oQslII/AAAAAAAAARo/kQ8pm8CbJkI/s640/cb_11.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187250610842145922"><br><br>紅線處顯示了這次編出來的檔案有多大。<br><br>到這裡程式是編完了。但是… 檔案在哪邊勒?!<br><p><br></p><h2>Hex file 的位置</h2><br>先進去專案開的位置，觀察紅線處<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://3.bp.blogspot.com/_hmIU1OIxdtY/R_zRyIQslKI/AAAAAAAAAR4/c-N72HK_wkg/s640/41b53.png" border="0" alt="" id="BLOGGER_PHOTO_ID_5187251529965147298"><br><br>裡面有個叫 bin 的資料夾，點進去裡面有有一個叫做  Debug 的資料夾點進去後如下圖。<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://3.bp.blogspot.com/_hmIU1OIxdtY/R_zR5IQslLI/AAAAAAAAASA/0iN0NYRDgrA/s640/145d1.png" border="0" alt="" id="BLOGGER_PHOTO_ID_5187251650224231602"><br><br>紅色細框處就是我們要燒錄的 Hex 檔拉，這裡透過 Code::Blocks + SDCC 編出來副檔名會是 .exe 不過影響，到時候要燒錄就是選他拉。<br><p><br></p><h2>燒錄</h2><br>打開燒錄軟體，點 open file 之後要把 [檔案類型] 選 所有檔案 才看的到我們要的 .exe 然後把目錄移進去剛剛上面說的目錄。<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://4.bp.blogspot.com/_hmIU1OIxdtY/R_zSTYQslMI/AAAAAAAAASI/Ru7z31Lv1oA/s640/load_exe.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187252101195797698"><br>點到我們要的檔案(exp4.exe)後 點 開啟舊檔<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://1.bp.blogspot.com/_hmIU1OIxdtY/R_zSboQslNI/AAAAAAAAASQ/nVkaBzlZWYI/s640/burning.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187252242929718482"><br>那我們就可以快快樂樂的燒錄拉~<br><br><p><br></p><h2>調整字型</h2><br>可能有的人會覺得 Code::Blocks 預設的字型太小，所以請到選單列的 [Setting] -&gt; [Editor…] 如下圖 (因為 Windows 我拍不到 ScreenShot 在此用 Mac 的代替，不過選單位置沒變)<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://3.bp.blogspot.com/_hmIU1OIxdtY/R_zTwIQslOI/AAAAAAAAASY/AZQnYSI5dPo/s640/e75f5.png" border="0" alt="" id="BLOGGER_PHOTO_ID_5187253694628664546"><br><br>點出來後 如下圖<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://3.bp.blogspot.com/_hmIU1OIxdtY/R_zUNIQslPI/AAAAAAAAASg/TlGNORMB6qk/s640/b6b8d.png" border="0" alt="" id="BLOGGER_PHOTO_ID_5187254192844870898"><br>點選上圖框框處 [Choose] 會出現如下圖。<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://3.bp.blogspot.com/_hmIU1OIxdtY/R_zUWIQslQI/AAAAAAAAASo/4XeNrj_hwb8/s640/c0251.PNG" border="0" alt="" id="BLOGGER_PHOTO_ID_5187254347463693570"><br>調整到你想要的大小按下 [確定] 就好拉~<br><p><br></p><h2>美化程式碼</h2><br>這點倒是我覺得超方便的地方，因為 Linux 底下用 vi 最喜歡的就是這個功能 XDD<br><br>在選單的 [Plugings] -&gt; [Source Code Format] 如下圖，同時這裡 Code 還是很亂的<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://4.bp.blogspot.com/_hmIU1OIxdtY/R_zWCYQslRI/AAAAAAAAASw/kV8pDkJq1iM/s640/34407.png" border="0" alt="" id="BLOGGER_PHOTO_ID_5187256207184532754"><br><br>點下後… 將將！！ 程式碼就變成下面這樣了，是不是很讚的功能勒~ 這對於平常沒有好的 coding style 的人來說實在造福很多，尤其是有時候寫一寫程式左右大括號數目不一，利用 formatter 來 “修整” 一下程式碼實在是最好不過的東西了<br><br><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://2.bp.blogspot.com/_hmIU1OIxdtY/R_zWO4QslSI/AAAAAAAAAS4/0CTBqPK7jS8/s640/aeb3e.png" border="0" alt="" id="BLOGGER_PHOTO_ID_5187256421932897570"><p></p>
	  
	</div>

	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/post/comment-styles/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>上一頁</a></li>
  		

        <li><a href="/archives"><i class="fa fa-archive"></i>Archive</a></li>

		
          <li class="next disabled"><a>下一頁<i class="fa fa-arrow-circle-o-right"></i></a></li>
        
	
</ul>
</div>

    </center>
	</div>
	
	<!-- comment -->
	
<section id="comment">
  <h2 class="title">留言</h2>

  
  	 <div id="disqus_thread">
     <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  	 </div>
  
</section>

	
	</div> <!-- col-md-9/col-md-12 -->
	
	
		<div class="col-md-3"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2008-04-09, Wed 
	</div>
	

	<!-- categories -->
    

	<!-- tags -->
		

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	

</div><!-- row -->

	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2015 neoesque
  
      with help from <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>


<script type="text/javascript">
var disqus_shortname = 'parsefloat';
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>
   </html>
